{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\flavi\\\\WindSurf Projects\\\\karaoke-app\\\\frontend\\\\src\\\\pages\\\\UserSetup.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { Container, Box, Button, TextField, Typography, Grid, Avatar } from '@mui/material';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst avatars = ['/avatars/1.png', '/avatars/2.png', '/avatars/3.png', '/avatars/4.png', '/avatars/5.png', '/avatars/6.png', '/avatars/7.png', '/avatars/8.png'];\nfunction UserSetup() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    sessionId: urlSessionId\n  } = useParams();\n  const [name, setName] = useState('');\n  const [selectedAvatar, setSelectedAvatar] = useState(null);\n  const [error, setError] = useState('');\n  const [isHost, setIsHost] = useState(false);\n  useEffect(() => {\n    // Check if this is a new session (user is host)\n    const tempSessionId = localStorage.getItem('tempSessionId');\n    setIsHost(!urlSessionId);\n\n    // Clear temporary session ID\n    return () => {\n      localStorage.removeItem('tempSessionId');\n    };\n  }, [urlSessionId]);\n  const generateUserId = () => {\n    return Math.random().toString(36).substring(2) + Date.now().toString(36);\n  };\n  const handleSubmit = () => {\n    if (!name.trim()) {\n      setError('Please enter your name');\n      return;\n    }\n    if (!selectedAvatar) {\n      setError('Please select an avatar');\n      return;\n    }\n\n    // Get the correct session ID\n    const targetSessionId = urlSessionId || localStorage.getItem('tempSessionId');\n    if (!targetSessionId) {\n      setError('Session ID not found');\n      navigate('/');\n      return;\n    }\n\n    // Store user data in localStorage for persistence\n    const userData = {\n      id: generateUserId(),\n      name: name.trim(),\n      avatar: selectedAvatar,\n      isHost: isHost\n    };\n    localStorage.setItem('userData', JSON.stringify(userData));\n\n    // Navigate to session\n    navigate(`/session/${targetSessionId}`);\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"sm\",\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 8,\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        gap: 4\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h4\",\n        component: \"h1\",\n        gutterBottom: true,\n        children: \"Set Up Your Profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(Typography, {\n        color: \"error\",\n        align: \"center\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        label: \"Your Name\",\n        value: name,\n        onChange: e => setName(e.target.value),\n        error: !!error && !name.trim(),\n        helperText: !name.trim() ? error : '',\n        sx: {\n          mb: 4\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        component: \"h2\",\n        gutterBottom: true,\n        children: \"Choose Your Avatar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        container: true,\n        spacing: 2,\n        justifyContent: \"center\",\n        children: avatars.map((avatar, index) => /*#__PURE__*/_jsxDEV(Grid, {\n          item: true,\n          children: /*#__PURE__*/_jsxDEV(Avatar, {\n            src: avatar,\n            sx: {\n              width: 80,\n              height: 80,\n              cursor: 'pointer',\n              border: selectedAvatar === avatar ? '3px solid #2196f3' : 'none',\n              '&:hover': {\n                opacity: 0.8\n              }\n            },\n            onClick: () => setSelectedAvatar(avatar)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), !!error && !selectedAvatar && /*#__PURE__*/_jsxDEV(Typography, {\n        color: \"error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        size: \"large\",\n        onClick: handleSubmit,\n        sx: {\n          mt: 4\n        },\n        children: \"Join Session\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        color: \"text.secondary\",\n        align: \"center\",\n        children: isHost ? 'You will be the host of this session' : 'You are joining as a participant'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n_s(UserSetup, \"KaBux5tn9C8FgUx+Rfip0SmqOrc=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = UserSetup;\nexport default UserSetup;\nvar _c;\n$RefreshReg$(_c, \"UserSetup\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useParams","Container","Box","Button","TextField","Typography","Grid","Avatar","jsxDEV","_jsxDEV","avatars","UserSetup","_s","navigate","sessionId","urlSessionId","name","setName","selectedAvatar","setSelectedAvatar","error","setError","isHost","setIsHost","tempSessionId","localStorage","getItem","removeItem","generateUserId","Math","random","toString","substring","Date","now","handleSubmit","trim","targetSessionId","userData","id","avatar","setItem","JSON","stringify","maxWidth","children","sx","mt","display","flexDirection","alignItems","gap","variant","component","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","align","fullWidth","label","value","onChange","e","target","helperText","mb","container","spacing","justifyContent","map","index","item","src","width","height","cursor","border","opacity","onClick","size","_c","$RefreshReg$"],"sources":["C:/Users/flavi/WindSurf Projects/karaoke-app/frontend/src/pages/UserSetup.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport {\n  Container,\n  Box,\n  Button,\n  TextField,\n  Typography,\n  Grid,\n  Avatar,\n} from '@mui/material';\n\nconst avatars = [\n  '/avatars/1.png',\n  '/avatars/2.png',\n  '/avatars/3.png',\n  '/avatars/4.png',\n  '/avatars/5.png',\n  '/avatars/6.png',\n  '/avatars/7.png',\n  '/avatars/8.png',\n];\n\nfunction UserSetup() {\n  const navigate = useNavigate();\n  const { sessionId: urlSessionId } = useParams();\n  const [name, setName] = useState('');\n  const [selectedAvatar, setSelectedAvatar] = useState(null);\n  const [error, setError] = useState('');\n  const [isHost, setIsHost] = useState(false);\n\n  useEffect(() => {\n    // Check if this is a new session (user is host)\n    const tempSessionId = localStorage.getItem('tempSessionId');\n    setIsHost(!urlSessionId);\n\n    // Clear temporary session ID\n    return () => {\n      localStorage.removeItem('tempSessionId');\n    };\n  }, [urlSessionId]);\n\n  const generateUserId = () => {\n    return Math.random().toString(36).substring(2) + Date.now().toString(36);\n  };\n\n  const handleSubmit = () => {\n    if (!name.trim()) {\n      setError('Please enter your name');\n      return;\n    }\n    if (!selectedAvatar) {\n      setError('Please select an avatar');\n      return;\n    }\n\n    // Get the correct session ID\n    const targetSessionId = urlSessionId || localStorage.getItem('tempSessionId');\n    if (!targetSessionId) {\n      setError('Session ID not found');\n      navigate('/');\n      return;\n    }\n\n    // Store user data in localStorage for persistence\n    const userData = {\n      id: generateUserId(),\n      name: name.trim(),\n      avatar: selectedAvatar,\n      isHost: isHost,\n    };\n    localStorage.setItem('userData', JSON.stringify(userData));\n\n    // Navigate to session\n    navigate(`/session/${targetSessionId}`);\n  };\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Box\n        sx={{\n          mt: 8,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          gap: 4,\n        }}\n      >\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          Set Up Your Profile\n        </Typography>\n\n        {error && (\n          <Typography color=\"error\" align=\"center\">\n            {error}\n          </Typography>\n        )}\n\n        <TextField\n          fullWidth\n          label=\"Your Name\"\n          value={name}\n          onChange={(e) => setName(e.target.value)}\n          error={!!error && !name.trim()}\n          helperText={!name.trim() ? error : ''}\n          sx={{ mb: 4 }}\n        />\n\n        <Typography variant=\"h6\" component=\"h2\" gutterBottom>\n          Choose Your Avatar\n        </Typography>\n\n        <Grid container spacing={2} justifyContent=\"center\">\n          {avatars.map((avatar, index) => (\n            <Grid item key={index}>\n              <Avatar\n                src={avatar}\n                sx={{\n                  width: 80,\n                  height: 80,\n                  cursor: 'pointer',\n                  border: selectedAvatar === avatar ? '3px solid #2196f3' : 'none',\n                  '&:hover': {\n                    opacity: 0.8,\n                  },\n                }}\n                onClick={() => setSelectedAvatar(avatar)}\n              />\n            </Grid>\n          ))}\n        </Grid>\n\n        {!!error && !selectedAvatar && (\n          <Typography color=\"error\">{error}</Typography>\n        )}\n\n        <Button\n          variant=\"contained\"\n          size=\"large\"\n          onClick={handleSubmit}\n          sx={{ mt: 4 }}\n        >\n          Join Session\n        </Button>\n\n        <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\n          {isHost ? 'You will be the host of this session' : 'You are joining as a participant'}\n        </Typography>\n      </Box>\n    </Container>\n  );\n}\n\nexport default UserSetup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}